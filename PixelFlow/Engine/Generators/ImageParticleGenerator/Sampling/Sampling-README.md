# Sampling - Сэмплинг пикселей

Умный отбор пикселей из изображения для создания частиц.

## Файлы

### PixelSampler.swift
**Основной сэмплер пикселей с множеством стратегий**

**Стратегии сэмплинга:**

#### Uniform (Равномерный)
- Равномерное распределение точек по сетке
- Быстрый и предсказуемый
- Подходит для простых изображений

#### Importance (По важности)
- Выбор пикселей с высоким контрастом
- Учитывает насыщенность и локальные особенности
- Создает более естественное распределение

#### Adaptive (Адаптивный)
- Повышенная плотность в детализированных областях
- Автоматическая адаптация к сложности
- Лучше сохраняет мелкие элементы

#### Hybrid (Гибридный)
- Комбинация стратегий
- Баланс скорости и качества
- Рекомендуется для большинства случаев

**Ключевые компоненты:**
- `PixelCoordinate` - структура для Hashable координат
- `getPixelColor()` - извлечение реального цвета пикселя
- `calculatePixelImportance()` - оценка важности пикселя

### PixelSampling.swift
**Дополнительные утилиты и алгоритмы сэмплинга**

**Расширенные функции:**
- `performPixelSampling()` - альтернативная реализация сэмплинга
- `calculatePixelImportance()` - детальный анализ важности
- `getNeighborPixels()` - поиск соседних пикселей
- `selectWeightedSamples()` - взвешенный выбор

**Оптимизации:**
- Эффективная работа с памятью
- Кэширование промежуточных результатов
- Предварительные вычисления

## Процесс сэмплинга

```
ImageAnalysis → выбор стратегии → анализ важности → извлечение цветов → [Sample]
```

## Применение

Результаты сэмплинга (массив `Sample`) передаются в `ParticleAssembler` для создания финальных частиц.

**Sample структура:**
- `x, y` - координаты в изображении
- `color` - реальный цвет пикселя в формате SIMD4<Float>
